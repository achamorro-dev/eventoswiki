---
import { OrganizationsContainer } from '@/organizations/di/organizations.container'
import { MatchOrganizationsQuery } from '@/organizations/application/match-organizations.query'
import PaginatedOrganizationsGrid from '@/organizations/presentation/client/components/organizations-grid/paginated-organizations-grid.astro'

interface Props {
  location?: string
  page: number
}

const { location, page } = Astro.props
const { data: organizations, totalPages } = await OrganizationsContainer.get(MatchOrganizationsQuery).execute({
  count: 12,
  page,
  location,
})
---

<PaginatedOrganizationsGrid organizations={organizations} page={page} totalPages={totalPages}>
  <slot />
</PaginatedOrganizationsGrid>
