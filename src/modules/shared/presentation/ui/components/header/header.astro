---
import Logo from '@/ui/components/logo/logo.astro'
import Menu from '@/ui/components/menu/menu.astro'
import UserMenu from '@/users/presentation/server/components/user-menu/user-menu.astro'
import { Urls } from '../../urls/urls'
import Link from '../link/link.astro'

const hasActiveSession = Astro.locals.user !== null
const userId = Astro.locals.user?.id
---

<header class="header">
  <Logo />
  <Menu />
  <section class="actions">
    <Link
      classes="add-event-link"
      variant="outline"
      href="https://github.com/achamorro-dev/eventoswiki/issues/new?assignees=achamorro-dev&labels=enhancement&projects=&template=solicitud-nuevo-evento.yaml&title=A%C3%B1adir+nuevo+evento%3A+"
      target={'_blank'}
    >
      Añadir evento
    </Link>
    {
      !hasActiveSession && (
        <Link href={Urls.LOGIN} variant="primary">
          Iniciar sesión
        </Link>
      )
    }
    {hasActiveSession && userId && <UserMenu userId={userId} />}
  </section>
</header>

<style>
  .header {
    @apply z-20 flex h-14 items-center justify-between bg-background px-4 dark:bg-background-dark md:sticky md:top-0 lg:h-16 lg:px-8;
  }

  .actions {
    @apply flex items-center gap-4;
  }

  .add-event-link {
    @apply hidden md:block;
  }
</style>
